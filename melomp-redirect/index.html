<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Returning to Melo</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
  </head>

  <body>
    <p>Returning to Meloâ€¦</p>

    <script>
      const params = new URLSearchParams(window.location.search)

      const mode = params.get("mode")        // onboarding | checkout
      const status = params.get("status")    // success | cancel

      const ts = Date.now()

      console.log("Redirect mode:", mode)
      console.log("Redirect status:", status)

      // ---------------- SELLER ONBOARDING ----------------
      if (mode === "onboarding") {
        window.location.replace(
          "melomp://seller-hub/wallet?ts=" + ts
        )
      }

      // ---------------- CHECKOUT ----------------
      else if (mode === "checkout") {
        if (status === "success") {
          window.location.replace(
            "melomp://checkout/success?ts=" + ts
          )
        } else {
          window.location.replace(
            "melomp://checkout/cancel?ts=" + ts
          )
        }
      }

      // ---------------- FALLBACK ----------------
      else {
        // safety net so we never dead-end
        window.location.replace(
          "melomp://?ts=" + ts
        )
      }
    </script>
  </body>
</html>
